# Тесты по модулю "Архитектура в DDD"

Эти тесты предназначены для проверки вашего понимания ключевых архитектурных концепций и паттернов, обсуждаемых в данном модуле. Ответы должны демонстрировать не только знание определений, но и способность применять эти знания на практике.

## Задание 1: Анализ и критика архитектуры

Представьте, что вам на обзор прислали следующую диаграмму архитектуры системы управления заказами интернет-магазина:

```
+------------------------------------+
|           Presentation Layer       |
| (Веб-интерфейс, Мобильное API)     |
|------------------------------------|
| - OrderController                  |
| - ProductViewController            |
| - UserController                   |
+------------------------------------+
              | (прямые вызовы ORM)
              v
+------------------------------------+
|           Business Logic Layer     |
| (Частично в контроллерах,          |
|  частично в "сервисах")            |
|------------------------------------|
| - OrderService (работает с ORM)    |
| - PaymentService (внешний API)     |
| - NotificationHelper (отправка email)|
+------------------------------------+
              | (прямые вызовы ORM, вызовы внешних API)
              v
+------------------------------------+
|           Data Access Layer        |
| (ORM Entities, DBContext)          |
+------------------------------------+
              | (SQL)
              v
+------------------------------------+
|           База данных (SQL)        |
+------------------------------------+
```

**Вопросы:**

1.  Какие основные проблемы или "запахи" вы видите в этой архитектуре с точки зрения DDD и принципов чистой архитектуры (например, Шестиугольной)? Опишите как минимум 3 проблемы.
2.  Как бы вы реорганизовали эту архитектуру, применяя принципы Шестиугольной архитектуры? Опишите ключевые компоненты (Ядро, Порты, Адаптеры) для системы управления заказами.
3.  Какие преимущества дала бы предложенная вами реорганизация с точки зрения тестируемости, гибкости и поддержки доменной логики?

## Задание 2: Проектирование с CQRS

Рассмотрим систему "Бронирование конференц-залов".

**Основные функции:**
*   Пользователь может посмотреть список доступных залов на определенную дату и время.
*   Пользователь может забронировать зал на определенный временной слот.
*   Пользователь может отменить свою бронь.
*   Администратор может добавлять новые залы и изменять их характеристики (вместимость, оборудование).

**Вопросы:**

1.  Определите основные Команды (Commands) и Запросы (Queries) для этой системы.
2.  Какие модели данных (Агрегаты на стороне записи, DTO/Read Models на стороне чтения) вы бы использовали для командной и запросной сторон?
3.  Опишите, как бы вы обеспечили консистентность данных между write-моделью и read-моделями (например, для отображения актуального списка бронирований после создания новой брони).
4.  Какие преимущества принесет использование CQRS в данной системе по сравнению с традиционным CRUD-подходом?

## Задание 3: Ограниченные Контексты (Bounded Contexts)

Представьте большую систему для управления университетом. Она включает в себя следующие подсистемы:

*   Приемная кампания (подача заявлений, вступительные экзамены, зачисление абитуриентов).
*   Учебный процесс (расписание занятий, успеваемость студентов, учебные планы, назначение преподавателей на курсы).
*   Финансовый отдел (оплата обучения, стипендии, зарплаты преподавателям).
*   Научная деятельность (публикации, гранты, конференции).
*   Кадровый учет (сотрудники, преподаватели, их контракты и личные дела).

**Вопросы:**

1.  Предложите возможное разделение этой системы на Ограниченные Контексты. Дайте каждому контексту осмысленное имя.
2.  Для двух выбранных вами контекстов опишите их основную ответственность и ключевые понятия (часть Единого Языка).
3.  Какие типы взаимосвязей (например, Партнерство, Общее Ядро, Клиент-Поставщик, Антикоррупционный Слой) вы бы установили между этими двумя выбранными контекстами? Обоснуйте свой выбор.

## Задание 4: Тестирование архитектуры

1.  Как бы вы подошли к тестированию приложения, построенного на основе Шестиугольной архитектуры? Какие типы тестов и на каких уровнях (адаптеры, порты, доменное ядро) были бы наиболее важны?
2.  В чем особенности тестирования системы, использующей CQRS? На что следует обратить особое внимание при тестировании командной и запросной сторон?

## Критерии оценки:

*   Глубина анализа и понимание принципов DDD и архитектурных паттернов.
*   Способность применять теоретические знания к практическим сценариям.
*   Четкость и логичность изложения ответов.
*   Обоснованность предложенных решений и аргументация.
