# Упражнение по модулю "Архитектура в DDD"

## Задание: Проектирование системы "Мини-Блог" с использованием Шестиугольной Архитектуры и CQRS

В этом упражнении вам предстоит спроектировать архитектуру для упрощенной системы "Мини-Блог". Основная задача — применить принципы Шестиугольной архитектуры (Порты и Адаптеры) и паттерна CQRS (Command Query Responsibility Segregation). Event Sourcing применять не обязательно, но можно упомянуть, где он мог бы быть полезен.

### Функциональные требования к системе "Мини-Блог":

1.  **Пользователи (Авторы):**
    *   Регистрация нового автора (имя, email, пароль – упрощенно, без сложной аутентификации).
    *   (Аутентификация для простоты опускается, предполагаем, что автор известен при операциях).

2.  **Посты:**
    *   Автор может создать новый пост (заголовок, текст).
    *   Автор может отредактировать свой пост.
    *   Автор может удалить свой пост.
    *   Посты имеют дату создания и дату последнего обновления.

3.  **Чтение:**
    *   Любой пользователь (авторизованный или нет) может просмотреть список всех постов (заголовок, имя автора, дата создания, краткое превью текста).
    *   Любой пользователь может просмотреть полный текст одного поста.

### Часть 1: Шестиугольная Архитектура

1.  **Определите Доменное Ядро (Domain Core):**
    *   Какие Агрегаты, Сущности и Объекты-Значения будут в вашем домене? (например, `Author`, `Post`).
    *   Какие Доменные Сервисы могут понадобиться (если есть логика, не принадлежащая конкретному агрегату)?
    *   Опишите основные бизнес-правила, инкапсулированные в доменных объектах.

2.  **Определите Порты (Ports):**
    *   **Входящие порты (Driving/Input Ports):** Какие операции инициируют пользователи или другие системы? Определите интерфейсы для Сервисов Приложения (Application Services), которые будут реализовывать эти use-cases.
        *   Пример: `IPostCreationService.createPost(authorId, title, content)`
    *   **Исходящие порты (Driven/Output Ports):** Какие зависимости от внешнего мира есть у вашего доменного ядра и сервисов приложения? Определите интерфейсы для Репозиториев, внешних сервисов и т.д.
        *   Пример: `IAuthorRepository.findById(authorId)`, `IPostRepository.save(post)`

3.  **Предложите Адаптеры (Adapters):**
    *   **Входящие адаптеры (Driving/Input Adapters):** Как внешние системы будут взаимодействовать с вашими входящими портами? (например, REST контроллеры, CLI команды).
    *   **Исходящие адаптеры (Driven/Output Adapters):** Какие конкретные реализации будут у ваших исходящих портов? (например, `PostgresPostRepository`, `InMemoryAuthorRepository`, `EmailNotificationServiceAdapter`).

4.  **Нарисуйте (схематично) диаграмму вашей Шестиугольной архитектуры** для системы "Мини-Блог", показывая ядро, порты и адаптеры.

### Часть 2: Применение CQRS

1.  **Разделение на Команды и Запросы:**
    *   Какие операции в вашей системе являются Командами (изменяют состояние)?
        *   Пример: `CreatePostCommand`, `EditPostCommand`.
    *   Какие операции являются Запросами (читают состояние, не изменяя его)?
        *   Пример: `GetPostByIdQuery`, `GetAllPostsQuery`.

2.  **Модели для Команд и Запросов:**
    *   **Командная сторона (Write Side):**
        *   Какие Агрегаты будут использоваться для обработки команд? (Вероятно, те же, что определены в Части 1).
        *   Как будут выглядеть репозитории для командной стороны (например, `IPostWriteRepository`)?
    *   **Запросная сторона (Read Side):**
        *   Какие модели данных (DTO или специализированные Read Models) будут оптимальны для отображения списка постов и одного поста? Эти модели могут отличаться от ваших доменных агрегатов.
        *   Как данные будут попадать в эти Read Models? (Рассмотрите варианты: обновление при сохранении агрегата, использование доменных событий для обновления, периодическая синхронизация).
        *   Как будут выглядеть интерфейсы для чтения этих моделей (например, `IPostReadService` или `IPostQueryHandler`)?

3.  **Преимущества CQRS в данном контексте:**
    *   Опишите, какие преимущества даст применение CQRS для системы "Мини-Блог" (например, оптимизация чтения, независимое масштабирование, разные модели данных).

### Часть 3: (Опционально) Event Sourcing

*   Подумайте, мог бы Event Sourcing быть полезен в этой системе? Для каких Агрегатов? Какие преимущества или сложности это бы привнесло? (Краткое описание).

### Что нужно предоставить:

*   Текстовое описание вашей архитектуры, включая:
    *   Определение доменного ядра.
    *   Список входящих и исходящих портов (интерфейсы).
    *   Примеры входящих и исходящих адаптеров.
    *   Описание разделения на команды и запросы.
    *   Описание моделей для командной и запросной сторон.
    *   Размышления о преимуществах выбранных подходов.
*   (Опционально) Схематичную диаграмму Шестиугольной архитектуры.
*   (Опционально) Краткие размышления по Event Sourcing.

### Критерии оценки:

*   Четкое определение доменных объектов и их ответственности.
*   Корректное определение и использование портов и адаптеров в соответствии с Шестиугольной архитектурой.
*   Логичное разделение системы на командную и запросную стороны (CQRS).
*   Продуманность моделей для чтения и записи.
*   Понимание преимуществ и компромиссов выбранных архитектурных решений.
*   Ясность и полнота описания.

Удачи!
