# Квиз по модулю "Агрегаты (Aggregates)"

## Вопросы

1.  **Какова основная роль Корня Агрегата (Aggregate Root)?**
    A)  Хранить ссылки на все другие Сущности в системе.
    B)  Быть единственной точкой входа для всех команд, изменяющих состояние Агрегата, и обеспечивать соблюдение инвариантов.
    C)  Предоставлять публичный доступ ко всем внутренним Сущностям и Объектам-значениям Агрегата.
    D)  Отвечать за персистентность (сохранение и загрузку) Агрегата.

2.  **Что такое "граница согласованности" (consistency boundary) в контексте Агрегатов?**
    A)  Граница, определяющая, какие Сущности могут ссылаться друг на друга напрямую.
    B)  Граница, в пределах которой все инварианты должны быть соблюдены и обеспечена транзакционная согласованность после каждого изменения.
    C)  Граница модуля или пакета в коде, где размещен Агрегат.
    D)  Граница, определяющая, какие части Агрегата могут быть изменены одновременно несколькими пользователями.

3.  **Как Агрегаты должны ссылаться на другие Агрегаты?**
    A)  Всегда через прямые объектные ссылки на Корни других Агрегатов.
    B)  Только через идентификаторы (ID) Корней других Агрегатов.
    C)  Допускаются как прямые ссылки, так и ссылки по ID, в зависимости от удобства.
    D)  Агрегаты не должны ссылаться на другие Агрегаты, чтобы обеспечить полную изоляцию.

4.  **Что такое инварианты Агрегата?**
    A)  Правила, которые должны выполняться только при создании Агрегата.
    B)  Бизнес-правила и условия, которые должны всегда оставаться истинными для Агрегата на протяжении всего его жизненного цикла.
    C)  Ограничения базы данных, наложенные на таблицы, представляющие Агрегат.
    D)  Методы Корня Агрегата, которые не изменяют его состояние.

5.  **Какое утверждение относительно размера Агрегатов является наиболее корректным?**
    A)  Агрегаты всегда должны быть как можно больше, чтобы охватить максимальное количество связанных Сущностей.
    B)  Агрегаты всегда должны быть как можно меньше, идеально содержать только Корень Агрегата.
    C)  Размер Агрегата должен определяться границами транзакционной согласованности; они должны быть достаточно малы, чтобы избежать проблем с производительностью и блокировками, но достаточно велики, чтобы обеспечить инварианты.
    D)  Размер Агрегата не имеет значения, если Корень Агрегата реализован правильно.

6.  **Кто отвечает за обеспечение соблюдения инвариантов Агрегата?**
    A)  Сервисы Приложения (Application Services).
    B)  Репозиторий, при сохранении Агрегата.
    C)  Корень Агрегата (Aggregate Root).
    D)  Клиентский код, вызывающий методы Агрегата.

7.  **Почему рекомендуется, чтобы одна транзакция изменяла только один экземпляр Агрегата?**
    A)  Чтобы упростить код Репозитория.
    B)  Это ограничение большинства ORM.
    C)  Чтобы обеспечить масштабируемость, избежать распределенных транзакций и упростить управление согласованностью данных.
    D)  Чтобы уменьшить количество кода, выполняемого в транзакции.

8.  **Какая из следующих сущностей, скорее всего, НЕ будет Корнем Агрегата в системе управления заказами?**
    A)  `Заказ` (Order)
    B)  `Клиент` (Customer)
    C)  `ПозицияЗаказа` (OrderItem)
    D)  `Продукт` (Product), на который ссылаются из ПозицииЗаказа.
