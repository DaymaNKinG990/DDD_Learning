# Практическое задание: Ограниченные контексты в системе бронирования отелей

## Контекст
Вы разрабатываете систему управления отелем. Вам нужно выделить ограниченные контексты и реализовать их взаимодействие.

## Задание

### Часть 1: Выделение ограниченных контекстов
Выделите 4-5 ограниченных контекста для системы управления отелем. Для каждого укажите:
1. Название контекста
2. Основные сущности и агрегаты
3. Основные сервисы
4. Тип взаимодействия с другими контекстами

### Часть 2: Реализация контекстов
Реализуйте на Python следующие ограниченные контексты:

1. **Бронирование (Booking)**
   - Сущности: Бронирование, Номер, Гость
   - Возможность создать, отменить, изменить бронирование
   - Проверка доступности номеров

2. **Проживание (Accommodation)**
   - Сущности: Заселение, Выселение, Номер
   - Отслеживание текущих постояльцев
   - Управление состоянием номеров

3. **Бухгалтерия (Accounting)**
   - Сущности: Счет, Платеж, Тариф
   - Начисление платежей
   - Формирование отчетов

### Часть 3: Интеграция контекстов
1. Реализуйте взаимодействие между контекстами с помощью событий (Event-Driven Architecture)
2. Создайте антикоррупционный слой для преобразования данных между контекстами
3. Реализуйте сагу для распределенной транзакции между контекстами

### Требования к коду
1. Используйте type hints
2. Напишите тесты для каждого контекста
3. Документируйте код с помощью docstrings
4. Следуйте принципам DDD и SOLID

## Пример структуры кода
```python
# booking/domain/entities.py
@dataclass
class Booking:
    id: UUID
    room_id: UUID
    guest_id: UUID
    period: DateRange
    status: BookingStatus

# accommodation/domain/entities.py
@dataclass
class CheckIn:
    id: UUID
    booking_id: UUID
    room_id: UUID
    guest_id: UUID
    check_in_date: date
    check_out_date: date

# accounting/domain/entities.py
@dataclass
class Invoice:
    id: UUID
    booking_id: UUID
    amount: Money
    status: InvoiceStatus
```

## Дополнительное задание (по желанию)
1. Реализуйте контекст "Управление уборкой" (Housekeeping)
2. Добавьте интеграцию с внешней платежной системой
3. Реализуйте механизм компенсационных действий для отката распределенных транзакций

## Критерии оценки
1. Корректность выделения границ контекстов
2. Качество кода и тестов
3. Правильность реализации взаимодействия между контекстами
4. Соответствие принципам DDD
