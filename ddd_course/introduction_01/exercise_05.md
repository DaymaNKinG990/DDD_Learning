# Практическое задание: Основы DDD

В этом задании вы примените основные концепции DDD на практике, реализовав простую систему учета книг в библиотеке.

## Задача

Вам необходимо реализовать следующие сущности и функциональность:

1. **Книга (Book)**
   - Имеет уникальный идентификатор (ISBN)
   - Название
   - Автор (может быть несколько)
   - Год издания
   - Доступное количество экземпляров

2. **Читатель (Reader)**
   - Уникальный идентификатор
   - Имя
   - Email (должен быть валидным)
   - Дата регистрации

3. **Выдача книги (BookLoan)**
   - Уникальный идентификатор выдачи
   - Книга
   - Читатель
   - Дата выдачи
   - Срок возврата
   - Фактическая дата возврата (если книга возвращена)

## Требования

1. Создайте классы, используя принципы DDD:
   - Определите, какие классы являются сущностями, а какие объектами-значениями
   - Реализуйте необходимые инварианты (например, email должен быть валидным, год издания не может быть в будущем и т.д.)
   - Используйте агрегаты, где это уместно

2. Реализуйте следующие методы:
   - Выдать книгу читателю (нельзя выдать книгу, если нет доступных экземпляров)
   - Вернуть книгу в библиотеку
   - Проверить просроченные выдачи
   - Найти все книги по автору
   - Найти все книги, которые сейчас у читателя

3. Напишите тесты для проверки функциональности

## Пример кода для начала

```python
from dataclasses import dataclass
from datetime import date, timedelta
from typing import List
from uuid import UUID, uuid4

# Пример начала реализации

@dataclass(frozen=True)
class Email:
    address: str

    def __post_init__(self):
        if "@" not in self.address:
            raise ValueError("Некорректный email адрес")

@dataclass
class Author:
    name: str

    def __post_init__(self):
        if not self.name.strip():
            raise ValueError("Имя автора не может быть пустым")

# Дополните реализацию...
```

## Дополнительное задание (по желанию)

1. Реализуйте репозиторий для работы с книгами и читателями
2. Добавьте доменный сервис для обработки бизнес-логики выдачи книг
3. Реализуйте уведомления для читателей о приближающемся сроке возврата книги

## Критерии оценки

1. Корректность реализации DDD-принципов
2. Качество кода (чистота, читаемость, документирование)
3. Полнота реализации требований
4. Наличие и качество тестов
5. Обработка ошибочных ситуаций

## Подсказки

1. Подумайте, какие объекты должны быть сущностями, а какие объектами-значениями
2. Определите границы агрегатов
3. Учитывайте инварианты при проектировании методов
4. Не забывайте про иммутабельность объектов-значений

Удачи в выполнении задания!
